<div class="layui-card" style="box-shadow: none;border: none;">
  <div class="layui-tab layui-tab-brief">
    <ul class="layui-tab-title" style="text-align: center;">
      <li class="layui-this">公告消息</li>
    </ul>
    <div class="layui-tab-content" style="padding: 0;">
      <!-- tab1 -->
      <div class="layui-tab-item layui-show">
        <%if(isNotEmpty){%>
        <div class="message-list">
          <!-- 实际项目请使用后台数据循环出来 -->
          <:for items="${messageList}" var="item">
            <a class="message-list-item" href="javascript:;">
              <i class="layui-icon layui-icon-speaker message-item-icon"></i>
              <div class="message-item-right announcement" tag="${item.id}">
                <h2 class="message-item-title">${item.title!}</h2>
                <p class="message-item-text">${item.pubUser} ${item.createTime!,dateFormat="yyyy-MM-dd HH:mm:ss"}</p>
              </div>
            </a>
          </:for>
        </div>
        <%}else{%>
        <!-- 列表为空 -->
        <div class="message-list-empty">
          <i class="layui-icon layui-icon-notice"></i>
          <div>没有通知</div>
        </div>
        <%}%>
        <!--        <a id="messageClearBtn1" class="message-btn-clear">全部标记已读</a>-->
      </div>
    </div>
  </div>
</div>
<script type="text/html" id="eDialogInfoDialog">
  <div class="paper-info-group">
    <h2 style="text-align: center;" id="h-title"></h2>
    <p style="font-size: 16px; text-indent:2em;margin-top: 10px;padding-left: 10px;padding-right: 10px" id="p-content">
      </p>
  </div>
</script>
<script>
  layui.use(['element', 'admin'], function () {
    var $ = layui.jquery;
    var admin = layui.admin;

    /* 加载更多按钮点击事件 */
    $('#messageMoreBtn2').click(function () {
      var $that = $(this);
      admin.btnLoading($that);
      setTimeout(function () {
        admin.btnLoading($that, false);
        $that.before($that.prev()[0].outerHTML);
      }, 300);
    });

    /* 清空消息点击事件 */
    $('#messageClearBtn1,#messageClearBtn2,#messageClearBtn3').click(function () {
      $(this).parents('.layui-tab-item').addClass('show-empty');
    });

    $('.announcement').click(function () {
      let id = $(this).attr('tag');
      $.get('${ctxPath}/base/information/get', {id: id}, function (res) {
        if (0 === res.code) {
          console.log(res);
          // $('#h-title').html(res.data.title);
          // $('#h-content').html(res.data.comments);
          admin.open({
            type: 1,
            title: '公告信息',
            area: ["700px", "400px"],
            content: $('#eDialogInfoDialog').html(),
            success: function (layero, dIndex) {
              $('#h-title').html(res.data.title);
              $('#p-content').html(res.data.comments);
            }
          });
        } else {
          layer.msg(res.msg, {icon: 2, anim: 6});
        }
      });
    });
  });
</script>

<style>
  /** 消息列表样式 */
  .message-list {
    position: absolute;
    top: 48px;
    left: 0;
    right: 0;
    bottom: 45px;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }

  .message-list-item {
    display: block;
    padding: 10px 20px;
    line-height: 24px;
    position: relative;
    border-bottom: 1px solid #e8e8e8;
  }

  .message-list-item:hover, .message-btn-clear:hover, .message-btn-more:hover {
    background: #F2F2F2;
  }

  .message-list-item .message-item-icon {
    width: 40px;
    height: 40px;
    line-height: 40px;
    margin-top: -20px;
    border-radius: 50%;
    position: absolute;
    left: 20px;
    top: 50%;
  }

  .message-list-item .message-item-icon.layui-icon {
    color: #fff;
    font-size: 22px;
    text-align: center;
    background-color: #FE5D58;
  }

  .message-list-item .message-item-icon + .message-item-right {
    margin-left: 55px;
  }

  .message-list-item .message-item-title {
    color: #666;
    font-size: 14px;
  }

  .message-list-item .message-item-text {
    color: #999;
    font-size: 12px;
  }

  .message-list-item > .layui-badge {
    position: absolute;
    right: 20px;
    top: 12px;
  }

  .message-list-item > .layui-badge + .message-item-right {
    margin-right: 50px;
  }

  .message-btn-clear, .message-btn-more {
    color: #666;
    display: block;
    padding: 10px 5px;
    line-height: 24px;
    text-align: center;
    cursor: pointer;
  }

  .message-btn-clear {
    position: absolute;
    left: 0;
    right: 0;
    bottom: 0;
    border-top: 1px solid #e8e8e8;
  }

  .message-btn-more {
    color: #666;
    font-size: 13px;
  }

  .message-btn-more.ew-btn-loading > .ew-btn-loading-text {
    font-size: 13px !important;
  }

  .message-list-empty {
    color: #999;
    padding: 100px 0;
    text-align: center;
    display: none;
  }

  .message-list-empty > .layui-icon {
    color: #ccc;
    display: block;
    font-size: 45px;
    margin-bottom: 15px;
  }

  .show-empty .message-list-empty {
    display: block;
  }

  .show-empty .message-btn-clear, .show-empty .message-list {
    display: none;
  }

  /** //消息列表样式结束 */
</style>
